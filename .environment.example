# =============================================================================
# StockPredictor V1 Environment Configuration
# =============================================================================
# Copy this file to .env and update with your actual values
# All configuration should be done through environment variables or config files
# NO ARGUMENT PARSING is used in this project per base rules

# =============================================================================
# API KEYS
# =============================================================================
POLYGON_API_KEY=your_polygon_api_key_here
ALPHAVANTAGE_API_KEY=your_alphavantage_api_key_here

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
DB_HOST=localhost
DB_PORT=5432
DB_NAME=stock_data
DB_USER=postgres
DB_PASSWORD=your_database_password_here

TEST_DB_HOST=localhost
TEST_DB_PORT=5332
TEST_DB_NAME=stock_data
TEST_DB_USER=postgres
TEST_DB_PASSWORD=your_database_password_here

# Database Connection Pool
FE_DB_POOL_SIZE=5
FE_DB_MAX_OVERFLOW=10
FE_DB_POOL_TIMEOUT=30

# Batch Processing Configuration
DEFAULT_BATCH_SIZE=100
MAX_WORKERS=4
PROCESSING_TIMEOUT=300

# FEATURE ENGINEERING
# Data Quality Configuration
MIN_DATA_POINTS=100
MAX_MISSING_PCT=0.05
OUTLIER_THRESHOLD=3.0
QUALITY_SCORE_THRESHOLD=50.0

# =============================================================================
# FEATURE ENGINEERING - DATA QUALITY
# =============================================================================
FE_MIN_DATA_POINTS=350
FE_MIN_DATA_POINTS_RSI=700
FE_MAX_MISSING_PCT=0.05
FE_OUTLIER_THRESHOLD=3.0
FE_QUALITY_SCORE_THRESHOLD=50.0
FE_MAX_GAP_DAYS=7
FE_MAX_DB_VALUE=1e8
FE_ENABLE_VALIDATION=true
FE_STRICT_VALIDATION=false

# =============================================================================
# FEATURE ENGINEERING - BATCH PROCESSING
# =============================================================================
FE_BATCH_SIZE=50
FE_MAX_WORKERS=4
FE_THREAD_POOL_SIZE=4
FE_PROCESSING_TIMEOUT=300
FE_SINGLE_TICKER_TIMEOUT=60
FE_PROGRESS_INTERVAL=10
FE_MAX_RETRIES=3
FE_RETRY_DELAY=1.0
FE_CONTINUE_ON_ERROR=true

# =============================================================================
# FEATURE ENGINEERING - TECHNICAL INDICATORS
# =============================================================================
FE_MACD_FAST=12
FE_MACD_SLOW=26
FE_MACD_SIGNAL=9
FE_RSI_OVERBOUGHT=70.0
FE_RSI_OVERSOLD=30.0
FE_BOLLINGER_PERIOD=20
FE_BOLLINGER_STD=2.0
FE_STOCH_K_PERIOD=14
FE_STOCH_D_PERIOD=3
FE_STOCH_OVERBOUGHT=80.0
FE_STOCH_OVERSOLD=20.0
FE_ATR_PERIOD=14
FE_ICHIMOKU_TENKAN=9
FE_ICHIMOKU_KIJUN=26
FE_ICHIMOKU_SENKOU_B=52
FE_ICHIMOKU_DISPLACEMENT=26
FE_FIBONACCI_LOOKBACK=100

# =============================================================================
# FEATURE ENGINEERING - FUNDAMENTAL ANALYSIS
# =============================================================================
# Data Collection
FE_FUNDAMENTAL_POLYGON_ENDPOINT=https://api.polygon.io/vX/reference/financials
FE_FUNDAMENTAL_UPDATE_FREQUENCY=daily

# Ratio Limits (for outlier capping) - format: min,max
FE_PE_RATIO_CAP=-100,100
FE_PB_RATIO_CAP=0,50
FE_DEBT_TO_EQUITY_CAP=0,10
FE_CURRENT_RATIO_CAP=0,20
FE_ROE_CAP=-1,2
FE_ROA_CAP=-1,1
FE_NET_MARGIN_CAP=-2,2
FE_GROSS_MARGIN_CAP=-1,1
FE_OPERATING_MARGIN_CAP=-2,2
FE_ASSET_TURNOVER_CAP=0,10
FE_QUICK_RATIO_CAP=0,20
FE_CASH_RATIO_CAP=0,10
FE_INTEREST_COVERAGE_CAP=-100,1000
FE_FINANCIAL_LEVERAGE_CAP=1,50

# SIC to GICS Sector Mapping Ranges - format: min,max
FE_SIC_ENERGY_RANGE=100,999
FE_SIC_MATERIALS_RANGE=1000,1499
FE_SIC_INDUSTRIALS_RANGE_1=1500,1799
FE_SIC_INDUSTRIALS_RANGE_2=2000,3999
FE_SIC_UTILITIES_RANGE=4000,4999
FE_SIC_CONSUMER_STAPLES_RANGE=5000,5199
FE_SIC_CONSUMER_DISCRETIONARY_RANGE=5200,5999
FE_SIC_FINANCIALS_RANGE=6000,6799
FE_SIC_TECHNOLOGY_RANGE=7000,8999
FE_SIC_DEFAULT_SECTOR=Industrials

# Quality Thresholds
FE_MIN_FUNDAMENTAL_DATA_POINTS=8
FE_MAX_MISSING_FUNDAMENTAL_PCT=0.25

# Scoring System Weights
FE_ALTMAN_Z_SCORE_WEIGHT=0.3
FE_PIOTROSKI_F_SCORE_WEIGHT=0.3
FE_FINANCIAL_HEALTH_WEIGHT=0.4

# Sector Analysis
FE_MIN_SECTOR_COMPANIES=5
FE_PERCENTILE_CALCULATION_METHOD=linear

# Growth Calculation - comma-separated list
FE_GROWTH_PERIODS=1,3,5
FE_MIN_PERIODS_FOR_GROWTH=2

# Database Storage
FE_FUNDAMENTAL_BATCH_SIZE=100
FE_FUNDAMENTAL_TIMEOUT=60

# =============================================================================
# FEATURE ENGINEERING - STORAGE
# =============================================================================
FE_STORAGE_PATH=data/features
FE_FEATURE_VERSION=v1.0
FE_PARQUET_COMPRESSION=snappy
FE_PARQUET_ENGINE=pyarrow
FE_PARQUET_ROW_GROUP_SIZE=50000
FE_SAVE_TO_DATABASE=true
FE_SAVE_TO_PARQUET=true
FE_USE_CONSOLIDATED_STORAGE=true
FE_OVERWRITE_EXISTING=false
FE_PARTITIONING_STRATEGY=by_date
FE_CLEANUP_OLD_VERSIONS=true
FE_MAX_VERSIONS_TO_KEEP=3
FE_MAX_ROWS_PER_FILE=5000000
FE_INCLUDE_METADATA_COLUMNS=true

# =============================================================================
# FEATURE ENGINEERING - ML CONFIGURATION
# =============================================================================
FE_ML_TEST_SIZE=0.2
FE_ML_VALIDATION_SIZE=0.1
FE_ML_SCALING_METHOD=standard
FE_ML_MISSING_STRATEGY=drop
FE_ML_TARGET_COLUMN=close
FE_ML_PREDICTION_HORIZON=1
FE_ML_ENABLE_FEATURE_SELECTION=false
FE_ML_MAX_FEATURES=0

# =============================================================================
# FEATURE ENGINEERING - MONITORING
# =============================================================================
FE_RECENT_ACTIVITY_DAYS=7
FE_STATS_REFRESH_INTERVAL=300
FE_MAX_JOB_HISTORY=20
FE_MAX_ERROR_LOG_ENTRIES=100
FE_MEMORY_THRESHOLD=0.8
FE_PROCESSING_TIME_WARNING=300
FE_ENABLE_ALERTS=false
FE_ALERT_EMAIL=

# =============================================================================
# FEATURE ENGINEERING - GENERAL SETTINGS
# =============================================================================
FE_ENABLE_PARALLEL=true
FE_DEBUG_MODE=false
FE_ENVIRONMENT=production
FE_DEFAULT_START_DATE=2020-01-01
FE_DEFAULT_LOOKBACK_YEARS=3
FE_DATE_FORMAT=%Y-%m-%d
FE_DATETIME_FORMAT=%Y-%m-%d %H:%M:%S
FE_DEFAULT_TIMEZONE=UTC
FE_MARKET_TIMEZONE=America/New_York
FE_DEFAULT_MARKET=stocks
FE_DEFAULT_ACTIVE_ONLY=true
FE_DEFAULT_SP500_ONLY=false
FE_DEFAULT_POPULAR_ONLY=false

# Technical Indicator Configuration
SMA_PERIODS=5,10,20,50,100,200
RSI_PERIODS=14,21
MACD_FAST=12
MACD_SLOW=26
MACD_SIGNAL=9
BOLLINGER_PERIOD=20
BOLLINGER_STD=2.0
STOCHASTIC_K_PERIOD=14
STOCHASTIC_D_PERIOD=3

# Storage Configuration
FEATURES_STORAGE_PATH=data/features
FEATURE_VERSION=v1.0
PARQUET_COMPRESSION=snappy
SAVE_TO_DATABASE=true